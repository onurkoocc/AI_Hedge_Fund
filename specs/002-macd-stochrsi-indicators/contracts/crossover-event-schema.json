{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Crossover Event Schema",
  "description": "Schema for MACD and StochRSI crossover event messages",
  "type": "object",
  "properties": {
    "event_type": {
      "type": "string",
      "enum": [
        "MACD bullish crossover",
        "MACD bearish crossover",
        "Bullish StochRSI crossover in oversold",
        "Bearish StochRSI crossover in overbought"
      ],
      "description": "Type of crossover event detected"
    },
    "symbol": {
      "type": "string",
      "description": "Trading symbol (e.g., BTC/USDT)"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of the event"
    },
    "values": {
      "type": "object",
      "description": "Indicator values at time of crossover",
      "properties": {
        "macd": {
          "type": "number",
          "description": "MACD Line value (4 decimal places)"
        },
        "macd_signal": {
          "type": "number",
          "description": "Signal Line value (4 decimal places)"
        },
        "macd_histogram": {
          "type": "number",
          "description": "Histogram value (4 decimal places)"
        },
        "stoch_rsi_k": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "%K Line value (4 decimal places)"
        },
        "stoch_rsi_d": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "%D Line value (4 decimal places)"
        }
      }
    },
    "message": {
      "type": "string",
      "description": "Human-readable message with values included",
      "examples": [
        "MACD bullish crossover (MACD: 0.0523, Signal: 0.0412)",
        "Bullish StochRSI crossover in oversold (K: 15.2345, D: 12.1234)"
      ]
    }
  },
  "required": ["event_type", "symbol", "timestamp", "message"]
}
